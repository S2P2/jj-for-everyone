# Excluding files from version control

<!-- Bob makes second commit without fetching, use .DS_Store for global example and another local one -->

Let's check up on Bob:

```sh
cd ~/jj-tutorial-bob
```

Done with his part of the assignment, he's already thinking about the submission.
The teacher expects to receive a tarball called `submission_alice_bob.tar.gz`.
After a little [trial and error](https://xkcd.com/1168/), he comes up with the following command to create the tarball:

```sh
tar czf submission_alice_bob.tar.gz README.md
```

Bob wants to spare Alice the hassle of having to figure that out, in case she ends up making the final submission.
He decides to add it to the documentation:

```sh
echo "
## Submission

Run the following command to create the submission tarball:

~~~sh
tar czf submission_alice_bob.tar.gz [FILE...]
~~~" >> README.md

jj describe -m "Add submission instructions"
```

Bob is careful to push only clean commits to the remote shared with Alice.
(Be like Bob!)
He double-checks the content of his commit with `jj show`:

<!-- generated by aha script -->
<pre class="aha">
Commit ID: <span class="blue ">c4170e871a915f015e97a0e9825d57bcb8dff7fb</span>
Change ID: <span class="purple ">smswwyokuvxtztqmnssvnulswotvmpzn</span>
Author   : <span class="yellow ">Bob</span> &lt;<span class="yellow ">bob@local</span>&gt; (<span class="cyan ">2025-07-22 21:27:47</span>)
Committer: <span class="yellow ">Bob</span> &lt;<span class="yellow ">bob@local</span>&gt; (<span class="cyan ">2025-07-22 21:27:47</span>)

    Add submission instructions

<span class="yellow ">Modified regular file README.md:</span>
    ...
<span class="red ">   3</span> <span class="green ">   3</span>: The file hello.py contains a script that greets the world.
<span class="red ">   4</span> <span class="green ">   4</span>: It can be executed with the command 'python hello.py'.
<span class="red ">   5</span> <span class="green ">   5</span>: Programming is fun!
     <span class="green ">   6</span>: <span class="underline "></span><span class="underline green "></span><span class="green "></span>
     <span class="green ">   7</span>: <span class="underline "></span><span class="underline green ">## Submission</span><span class="green "></span>
     <span class="green ">   8</span>: <span class="underline "></span><span class="underline green "></span><span class="green "></span>
     <span class="green ">   9</span>: <span class="underline "></span><span class="underline green ">Run the following command to create the submission tarball:</span><span class="green "></span>
     <span class="green ">  10</span>: <span class="underline "></span><span class="underline green "></span><span class="green "></span>
     <span class="green ">  11</span>: <span class="underline "></span><span class="underline green ">~~~sh</span><span class="green "></span>
     <span class="green ">  12</span>: <span class="underline "></span><span class="underline green ">tar czf submission_alice_bob.tar.gz [FILE...]</span><span class="green "></span>
     <span class="green ">  13</span>: <span class="underline "></span><span class="underline green ">~~~</span><span class="green "></span>
<span class="yellow ">Added regular file submission_alice_bob.tar.gz:</span>
<span class="cyan ">    (binary)</span>
</pre>

Oh no!
It looks like the result of Bob's research was recorded in the commit.
The tarball `submission_alice_bob.tar.gz` has no business being tracked in version control.

By default, Jujutsu records every single file in the project into your working copy, which is usually what you want.
But sometimes, you need to tell Jujutsu to ignore certain files and exclude them from being recorded.
For this purpose, Jujutsu reads a special `.gitignore` file if it exists in the project.
This file can contain a list of file names, directories, and patterns which describe the set of files that should not be tracked in version control.

To fix the problem, Bob adds a pattern for tarballs to the `.gitignore` file:

```sh
echo "*.tar.gz" > .gitignore
```

The star `*` symbol is a special [glob](https://en.wikipedia.org/wiki/Glob_(programming)) character which can expand to match any filename, including `submission_alice_bob`.
Adding only the precise filename `submission_alice_bob.tar.gz` to the `.gitignore` file would've worked as well, but the above pattern takes care of _any_ tarball.

````admonish info title="Ignoring files globally" collapsible=true
Sometimes you might have the same files lying around in several projects that are only intended for your personal use.
In that case, it makes sense to ignore these files globally, not just for a specific project.
It would be a little tedious to add personal files to the `.gitignore` of every single project you work on.

One such example is relevant for macOS users:
The Finder application stores hidden files called `.DS_Store` in directories opened with it.
These files can end up anywhere and basically never belong in version control.
If you're a macOS user, consider adding `.DS_Store` to your global `.gitignore` file:

```sh
echo ".DS_Store" >> ~/.gitignore
```
````

Let's check the commit content again:

<!-- generated by aha script -->
<pre class="aha">
Commit ID: <span class="blue ">ad2a8948eab4ff9829784573d243c0573a0978ce</span>
Change ID: <span class="purple ">smswwyokuvxtztqmnssvnulswotvmpzn</span>
Author   : <span class="yellow ">Bob</span> &lt;<span class="yellow ">bob@local</span>&gt; (<span class="cyan ">2025-07-22 21:27:47</span>)
Committer: <span class="yellow ">Bob</span> &lt;<span class="yellow ">bob@local</span>&gt; (<span class="cyan ">2025-07-22 21:28:48</span>)

    Add submission instructions

<span class="yellow ">Added regular file .gitignore:</span>
     <span class="green ">   1</span>: <span class="underline "></span><span class="underline green ">*.tar.gz</span><span class="green "></span>
<span class="yellow ">Modified regular file README.md:</span>
    ...
<span class="red ">   3</span> <span class="green ">   3</span>: The file hello.py contains a script that greets the world.
<span class="red ">   4</span> <span class="green ">   4</span>: It can be executed with the command 'python hello.py'.
<span class="red ">   5</span> <span class="green ">   5</span>: Programming is fun!
     <span class="green ">   6</span>: <span class="underline "></span><span class="underline green "></span><span class="green "></span>
     <span class="green ">   7</span>: <span class="underline "></span><span class="underline green ">## Submission</span><span class="green "></span>
     <span class="green ">   8</span>: <span class="underline "></span><span class="underline green "></span><span class="green "></span>
     <span class="green ">   9</span>: <span class="underline "></span><span class="underline green ">Run the following command to create the submission tarball:</span><span class="green "></span>
     <span class="green ">  10</span>: <span class="underline "></span><span class="underline green "></span><span class="green "></span>
     <span class="green ">  11</span>: <span class="underline "></span><span class="underline green ">~~~sh</span><span class="green "></span>
     <span class="green ">  12</span>: <span class="underline "></span><span class="underline green ">tar czf submission_alice_bob.tar.gz [FILE...]</span><span class="green "></span>
     <span class="green ">  13</span>: <span class="underline "></span><span class="underline green ">~~~</span><span class="green "></span>
<span class="yellow ">Added regular file submission_alice_bob.tar.gz:</span>
<span class="cyan ">    (binary)</span>
</pre>

Hmm... the `.gitignore` file has joined the party, but the tarball is _still_ recorded in the commit.
The reason is that Jujutsu only considers `.gitignore` for files it hasn't already started tracking.
Since Bob added the `.gitignore` after the unwelcome file started being tracked, it had no effect.
Luckily, Jujutsu has a command to make it stop tracking already-tracked files:

```sh
jj file untrack submission_alice_bob.tar.gz
```

The `untrack` command only works if the file to untrack is already present in `.gitignore`.
Otherwise, Jujutsu would immediately start tracking the file again just after untracking it.

Let's check the commit content one more time:

<!-- generated by aha script -->
<pre class="aha">
Commit ID: <span class="blue ">e583fa6efff0955761e7605b3f49fa9163c9c2fc</span>
Change ID: <span class="purple ">smswwyokuvxtztqmnssvnulswotvmpzn</span>
Author   : <span class="yellow ">Bob</span> &lt;<span class="yellow ">bob@local</span>&gt; (<span class="cyan ">2025-07-22 21:27:47</span>)
Committer: <span class="yellow ">Bob</span> &lt;<span class="yellow ">bob@local</span>&gt; (<span class="cyan ">2025-07-22 21:29:27</span>)

    Add submission instructions

<span class="yellow ">Added regular file .gitignore:</span>
     <span class="green ">   1</span>: <span class="underline "></span><span class="underline green ">*.tar.gz</span><span class="green "></span>
<span class="yellow ">Modified regular file README.md:</span>
    ...
<span class="red ">   3</span> <span class="green ">   3</span>: The file hello.py contains a script that greets the world.
<span class="red ">   4</span> <span class="green ">   4</span>: It can be executed with the command 'python hello.py'.
<span class="red ">   5</span> <span class="green ">   5</span>: Programming is fun!
     <span class="green ">   6</span>: <span class="underline "></span><span class="underline green "></span><span class="green "></span>
     <span class="green ">   7</span>: <span class="underline "></span><span class="underline green ">## Submission</span><span class="green "></span>
     <span class="green ">   8</span>: <span class="underline "></span><span class="underline green "></span><span class="green "></span>
     <span class="green ">   9</span>: <span class="underline "></span><span class="underline green ">Run the following command to create the submission tarball:</span><span class="green "></span>
     <span class="green ">  10</span>: <span class="underline "></span><span class="underline green "></span><span class="green "></span>
     <span class="green ">  11</span>: <span class="underline "></span><span class="underline green ">~~~sh</span><span class="green "></span>
     <span class="green ">  12</span>: <span class="underline "></span><span class="underline green ">tar czf submission_alice_bob.tar.gz [FILE...]</span><span class="green "></span>
     <span class="green ">  13</span>: <span class="underline "></span><span class="underline green ">~~~</span><span class="green "></span>
</pre>

Yay!
This commit looks nice and tidy.
